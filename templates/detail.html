<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ prop.building_name }} - Unit {{ prop.unit_number }} | Property Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background:#f4f6fc; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    h1 { color:#003366; font-weight:700; }
    .card { border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.05); }
    .card-header { background:#0056d2; color:#fff; font-weight:600; font-size:1.1rem; }
    .list-group-item { background:#fff; border:none; padding:12px 18px; }
    table th { background:#f1f3f6; font-weight:600; }
    .btn-secondary { background:#6c757d; border:none; font-weight:500; }
    .btn-secondary:hover { background:#5a6268; }
    .contact-badge { display:inline-flex; gap:.35rem; align-items:center; padding:.3rem .6rem; background:#eef4ff; border-radius:999px; margin-right:.35rem; margin-bottom:.35rem; font-size:.9rem; }
    .contact-badge a { text-decoration:none; }
    .contact-badge .pipe { opacity:.5; }
    @media (max-width:768px){
      h1{font-size:1.5rem}
      .card-header{font-size:1rem;text-align:center}
      .list-group-item{font-size:.95rem}
      table{font-size:.9rem}
      .btn{width:100%}
      .table th,.table td{white-space:nowrap}
    }
    @media (max-width:576px){ h1{font-size:1.3rem;text-align:center} .container{padding:15px} }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="mb-4 text-center text-md-start">{{ prop.building_name }} - Unit {{ prop.unit_number }}</h1>

    <!-- Property Details -->
    <div class="card mb-4">
      <div class="card-header">Property Information</div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item"><strong>Area:</strong> {{ prop.area_sqft }} sqft</li>
        <li class="list-group-item"><strong>Beds:</strong> {{ prop.beds or "N/A" }}</li>
        <li class="list-group-item"><strong>Community:</strong> {{ prop.community or "N/A" }}</li>
        <li class="list-group-item"><strong>Master Project:</strong> {{ prop.master_project or "N/A" }}</li>
        <li class="list-group-item"><strong>Property Type:</strong> {{ prop.property_type or "N/A" }}</li>
        <li class="list-group-item"><strong>Sub Type:</strong> {{ prop.sub_type or "N/A" }}</li>
        <li class="list-group-item"><strong>Land Number:</strong> {{ prop.land_number or "N/A" }}</li>
        <li class="list-group-item"><strong>Price:</strong> {{ prop.price or "N/A" }}</li>
      </ul>
    </div>

    <!-- Owners -->
    <div class="card mb-4">
      <div class="card-header">Owner(s)</div>
      <div class="table-responsive">
        <table class="table table-bordered mb-0">
          <thead>
            <tr>
              <th>Name</th>
              <th>Role</th>
              <th>Contact</th>
              <th>Registration Date</th>
            </tr>
          </thead>
          <tbody>
            {% for owner in prop.owners %}
            <tr>
              <td>{{ owner.owner_name }}</td>
              <td>{{ owner.role }}</td>
              <td>
                {% set nums = owner.contacts if owner.contacts is defined else [] %}
                {% if nums and nums|length %}
                  {% for n in nums %}
                    <span class="contact-badge">
                      <a href="tel:{{ n }}">{{ n }}</a>
                      <span class="pipe">|</span>
                      <a href="https://wa.me/{{ n | replace('+','') }}" target="_blank">WhatsApp</a>
                    </span>
                  {% endfor %}
                {% elif owner.contact %}
                  <span class="contact-badge">
                    <a href="tel:{{ owner.contact }}">{{ owner.contact }}</a>
                    <span class="pipe">|</span>
                    <a href="https://wa.me/{{ owner.contact | replace('+','') }}" target="_blank">WhatsApp</a>
                  </span>
                {% else %}
                  N/A
                {% endif %}
              </td>
              <td>{{ owner.registration_date or 'N/A' }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <a href="{{ url_for('home') }}" class="btn btn-secondary mt-4">‚Üê Back to Listings</a>
  </div>
</body>
</html>
